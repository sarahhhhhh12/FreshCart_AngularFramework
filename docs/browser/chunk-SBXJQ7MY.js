import{a as F,b as g,c as V,d as T,f as L,g as q,h as N,i as R,k as A}from"./chunk-5TX5RFFF.js";import{a as G}from"./chunk-KVS7A67W.js";import{c as P}from"./chunk-WFLLGZM2.js";import{e as b}from"./chunk-H266JN4Y.js";import{Bb as y,Cb as f,Jb as u,Qb as I,Sa as a,Tb as C,ba as v,ea as E,ib as c,kb as m,oa as w,ob as p,pa as h,sb as o,tb as l,ub as _,xb as x}from"./chunk-62ZXRRP4.js";var S=(i,r)=>({"is-valid":i,"is-invalid":r});function B(i,r){i&1&&(o(0,"p",5),u(1,"Email is Required"),l())}function D(i,r){i&1&&(o(0,"p",5),u(1,"Email is invalid"),l())}function M(i,r){i&1&&(o(0,"span"),_(1,"i",7),l())}function k(i,r){if(i&1){let n=x();o(0,"div")(1,"h1",1),u(2,"Verifiy Email"),l(),o(3,"form",2),y("ngSubmit",function(){w(n);let e=f();return h(e.verifiyEmailSubmit())}),o(4,"label",3),u(5,"Email"),l(),_(6,"input",4),c(7,B,2,0,"p",5)(8,D,2,0),o(9,"button",6),c(10,M,2,0,"span"),u(11," Verifiy "),l()()()}if(i&2){let n,t,e=f();a(3),m("formGroup",e.verifiyEmailInput),a(3),m("ngClass",C(5,S,!((n=e.verifiyEmailInput.get("email"))!=null&&n.errors)&&((n=e.verifiyEmailInput.get("email"))==null?null:n.touched),((n=e.verifiyEmailInput.get("email"))==null?null:n.errors)&&((n=e.verifiyEmailInput.get("email"))==null?null:n.touched))),a(),p(7,(t=e.verifiyEmailInput.get("email"))!=null&&t.getError("required")&&((t=e.verifiyEmailInput.get("email"))!=null&&t.touched)?7:(t=e.verifiyEmailInput.get("email"))!=null&&t.getError("email")&&((t=e.verifiyEmailInput.get("email"))!=null&&t.touched)?8:-1),a(2),m("disabled",e.isLoading||e.verifiyEmailInput.invalid),a(),p(10,e.isLoading?10:-1)}}function $(i,r){i&1&&(o(0,"p",5),u(1,"resetCode is Required"),l())}function j(i,r){i&1&&(o(0,"p",5),u(1,"resetCode is invalid"),l())}function O(i,r){i&1&&(o(0,"span"),_(1,"i",7),l())}function z(i,r){if(i&1){let n=x();o(0,"div")(1,"h1",1),u(2,"Verifiy Code"),l(),o(3,"form",2),y("ngSubmit",function(){w(n);let e=f();return h(e.verifiyCodeSubmit())}),o(4,"label",8),u(5,"Verifiy Code"),l(),_(6,"input",9),c(7,$,2,0,"p",5)(8,j,2,0),o(9,"button",6),c(10,O,2,0,"span"),u(11," Verifiy "),l()()()}if(i&2){let n,t,e=f();a(3),m("formGroup",e.verifiyCodeInput),a(3),m("ngClass",C(5,S,!((n=e.verifiyCodeInput.get("resetCode"))!=null&&n.errors)&&((n=e.verifiyCodeInput.get("resetCode"))==null?null:n.touched),((n=e.verifiyCodeInput.get("resetCode"))==null?null:n.errors)&&((n=e.verifiyCodeInput.get("resetCode"))==null?null:n.touched))),a(),p(7,(t=e.verifiyCodeInput.get("resetCode"))!=null&&t.getError("required")&&((t=e.verifiyCodeInput.get("resetCode"))!=null&&t.touched)?7:(t=e.verifiyCodeInput.get("resetCode"))!=null&&t.getError("pattern")&&((t=e.verifiyCodeInput.get("resetCode"))!=null&&t.touched)?8:-1),a(2),m("disabled",e.isLoading||e.verifiyCodeInput.invalid),a(),p(10,e.isLoading?10:-1)}}function H(i,r){i&1&&(o(0,"p",5),u(1,"email is Required"),l())}function J(i,r){i&1&&(o(0,"p",5),u(1,"email is invalid"),l())}function K(i,r){i&1&&(o(0,"p",5),u(1,"newPassword is Required"),l())}function Q(i,r){i&1&&(o(0,"p",5),u(1,"newPassword is invalid"),l())}function U(i,r){i&1&&(o(0,"span"),_(1,"i",7),l())}function W(i,r){if(i&1){let n=x();o(0,"div")(1,"h1",1),u(2,"Reset Password"),l(),o(3,"form",2),y("ngSubmit",function(){w(n);let e=f();return h(e.resetPasswordSubmit())}),o(4,"div")(5,"label",3),u(6,"Email"),l(),_(7,"input",10),c(8,H,2,0,"p",5)(9,J,2,0),l(),o(10,"div")(11,"label",11),u(12,"New Password"),l(),_(13,"input",12),c(14,K,2,0,"p",5)(15,Q,2,0),l(),o(16,"button",6),c(17,U,2,0,"span"),u(18," Reset Password "),l()()()}if(i&2){let n,t,e,d,s=f();a(3),m("formGroup",s.resetPasswordInput),a(4),m("ngClass",C(7,S,!((n=s.resetPasswordInput.get("email"))!=null&&n.errors)&&((n=s.resetPasswordInput.get("email"))==null?null:n.touched),((n=s.resetPasswordInput.get("email"))==null?null:n.errors)&&((n=s.resetPasswordInput.get("email"))==null?null:n.touched))),a(),p(8,(t=s.resetPasswordInput.get("email"))!=null&&t.getError("required")&&((t=s.resetPasswordInput.get("email"))!=null&&t.touched)?8:(t=s.resetPasswordInput.get("email"))!=null&&t.getError("email")&&((t=s.resetPasswordInput.get("email"))!=null&&t.touched)?9:-1),a(5),m("ngClass",C(10,S,!((e=s.resetPasswordInput.get("newPassword"))!=null&&e.errors)&&((e=s.resetPasswordInput.get("newPassword"))==null?null:e.touched),((e=s.resetPasswordInput.get("newPassword"))==null?null:e.errors)&&((e=s.resetPasswordInput.get("newPassword"))==null?null:e.touched))),a(),p(14,(d=s.resetPasswordInput.get("newPassword"))!=null&&d.getError("required")&&((d=s.resetPasswordInput.get("newPassword"))!=null&&d.touched)?14:(d=s.resetPasswordInput.get("newPassword"))!=null&&d.getError("pattern")&&((d=s.resetPasswordInput.get("newPassword"))!=null&&d.touched)?15:-1),a(2),m("disabled",s.isLoading||s.resetPasswordInput.invalid),a(),p(17,s.isLoading?17:-1)}}var le=(()=>{let r=class r{constructor(){this._AuthService=v(G),this._FormBuilder=v(R),this._Router=v(P),this.step=1,this.msgAlert="",this.isLoading=!1,this.verifiyEmailInput=this._FormBuilder.group({email:[null,[g.required,g.email]]}),this.verifiyCodeInput=this._FormBuilder.group({resetCode:[null,[g.required,g.pattern(/^[0-9]{6}$/)]]}),this.resetPasswordInput=this._FormBuilder.group({email:[null,[g.required,g.email]],newPassword:[null,[g.required,g.pattern(/^\w{6,}$/)]]})}verifiyEmailSubmit(){this.isLoading=!0;let t=this.verifiyEmailInput.get("email")?.value;this.resetPasswordInput.get("email")?.patchValue(t),this.emailSub=this._AuthService.setVerifiyEmail(this.verifiyEmailInput.value).subscribe({next:e=>{console.log(e),this.isLoading=!1,e.statusMsg=="success"&&(this.step=2)},error:e=>{console.log(e),this.isLoading=!1}})}verifiyCodeSubmit(){this.isLoading=!0,this.codeSub=this._AuthService.setVerifyCode(this.verifiyCodeInput.value).subscribe({next:t=>{console.log(t),this.isLoading=!1,t.status=="Success"&&(this.step=3)},error:t=>{console.log(t),this.isLoading=!1}})}resetPasswordSubmit(){this.isLoading=!0,this.resetPasswordSub=this._AuthService.setResetPassword(this.resetPasswordInput.value).subscribe({next:t=>{console.log(t),console.log(t.token),this.isLoading=!1,localStorage.setItem("userToken",t.token),this._Router.navigate(["/login"])},error:t=>{console.log(t),this.isLoading=!1}})}ngOnDestroy(){this.emailSub?.unsubscribe(),this.codeSub?.unsubscribe(),this.resetPasswordSub?.unsubscribe()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=E({type:r,selectors:[["app-forget"]],standalone:!0,features:[I],decls:4,vars:3,consts:[[1,"bg-light","my-2","p-4","shadow","rounded"],[1,"text-success","text-center"],[3,"ngSubmit","formGroup"],["for","email"],["formControlName","email","type","email","name","email","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","mt-2"],[1,"btn","btn-outline-success","mt-2",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],["for","code"],["formControlName","resetCode","type","text","name","text","id","code",1,"form-control",3,"ngClass"],["formControlName","email","type","email","name","email","id","email","readonly","",1,"form-control",3,"ngClass"],["for","newPassword"],["formControlName","newPassword","type","password","name","newPassword","id","newPassword",1,"form-control",3,"ngClass"]],template:function(e,d){e&1&&(o(0,"section",0),c(1,k,12,8,"div")(2,z,12,8,"div")(3,W,19,13,"div"),l()),e&2&&(a(),p(1,d.step==1?1:-1),a(),p(2,d.step==2?2:-1),a(),p(3,d.step==3?3:-1))},dependencies:[A,L,F,V,T,q,N,b]});let i=r;return i})();export{le as ForgetComponent};
