import{a as q,b as h,c as N,d as w,f as A,g as M,h as P,i as V,k as G}from"./chunk-5TX5RFFF.js";import{l as k}from"./chunk-724BLN2V.js";import{a as Y}from"./chunk-42A4AQYA.js";import{a as R,c as D}from"./chunk-WFLLGZM2.js";import{e as I}from"./chunk-H266JN4Y.js";import{Bb as E,Cb as S,Jb as a,Qb as T,Sa as m,Tb as b,ba as y,ea as x,ib as c,kb as g,ob as _,sb as r,tb as l,ub as v}from"./chunk-62ZXRRP4.js";var O=(t,o)=>({"is-valid":t,"is-invalid":o});function $(t,o){t&1&&(r(0,"p",13),a(1,"Details Is Required"),l())}function B(t,o){t&1&&(r(0,"p",13),a(1,"Details Is InValid"),l())}function j(t,o){if(t&1&&(r(0,"div",5),c(1,$,2,0,"p",13)(2,B,2,0),l()),t&2){let n,i=S();m(),_(1,(n=i.paymentForm.get("details"))!=null&&n.getError("required")&&((n=i.paymentForm.get("details"))!=null&&n.touched)?1:(n=i.paymentForm.get("details"))!=null&&n.getError("pattern")&&((n=i.paymentForm.get("details"))!=null&&n.touched)?2:-1)}}function z(t,o){t&1&&(r(0,"p",13),a(1,"Phone Is Required"),l())}function Z(t,o){t&1&&(r(0,"p",13),a(1,"Phone Is InValid"),l())}function H(t,o){if(t&1&&(r(0,"div",5),c(1,z,2,0,"p",13)(2,Z,2,0),l()),t&2){let n,i=S();m(),_(1,(n=i.paymentForm.get("phone"))!=null&&n.getError("required")&&((n=i.paymentForm.get("phone"))!=null&&n.touched)?1:(n=i.paymentForm.get("phone"))!=null&&n.getError("pattern")&&((n=i.paymentForm.get("phone"))!=null&&n.touched)?2:-1)}}function J(t,o){t&1&&(r(0,"p",13),a(1,"City Is Required"),l())}function K(t,o){t&1&&(r(0,"p",13),a(1,"City Is InValid"),l())}function L(t,o){if(t&1&&(r(0,"div",5),c(1,J,2,0,"p",13)(2,K,2,0),l()),t&2){let n,i=S();m(),_(1,(n=i.paymentForm.get("city"))!=null&&n.getError("required")&&((n=i.paymentForm.get("city"))!=null&&n.touched)?1:(n=i.paymentForm.get("city"))!=null&&n.getError("pattern")&&((n=i.paymentForm.get("city"))!=null&&n.touched)?2:-1)}}var oe=(()=>{let o=class o{constructor(){this._OrdersService=y(Y),this._FormBuilder=y(V),this._ActivatedRoute=y(R),this._ToastrService=y(k),this._Router=y(D),this.paymentForm=this._FormBuilder.group({details:[null,[h.required,h.pattern(/^[\w]{3,}$/)]],phone:[null,[h.required,h.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[h.required,h.pattern(/^[a-zA-Z]{3,}$/)]]})}checkOut(){this.paymentForm.valid&&this._ActivatedRoute.paramMap.subscribe({next:i=>{let s=i.get("id");this.checkOutSub=this._OrdersService.checkOutCart(s,this.paymentForm.value).subscribe({next:e=>{e.status=="success"&&window.open(e.session.url,"_self")}})}})}orderCash(){this.paymentForm.valid&&this._ActivatedRoute.paramMap.subscribe({next:i=>{let s=i.get("id");this.cashSub=this._OrdersService.orderCash(s,this.paymentForm.value).subscribe({next:e=>{e.status=="success"&&(this._ToastrService.success(`Total Price : ${e.data.totalOrderPrice}`,e.data.paymentMethodType),this._Router.navigate(["/allorders"]))}})}})}ngOnDestroy(){this.checkOutSub?.unsubscribe(),this.cashSub?.unsubscribe()}};o.\u0275fac=function(s){return new(s||o)},o.\u0275cmp=x({type:o,selectors:[["app-orders"]],standalone:!0,features:[T],decls:24,vars:16,consts:[[1,"w-75","mx-auto","shadow","bg-light","rounded","p-4","my-2"],[1,"text-success"],[3,"ngSubmit","formGroup"],["for","details"],["formControlName","details","placeholder","Details From Your Cart",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","phone"],["name","tel","formControlName","phone","placeholder","Enter Your Phone",1,"form-control",3,"ngClass"],["for","city"],["name","text","formControlName","city","placeholder","Enter Your city",1,"form-control",3,"ngClass"],[1,"d-flex","mt-2","gap-2"],[1,"btn","btn-success","mt-2"],["type","button",1,"btn","btn-success","mt-2",3,"click"],[1,"m-0"]],template:function(s,e){if(s&1&&(r(0,"section",0)(1,"h3",1),a(2,"Inter Details From Your Cart"),l(),r(3,"form",2),E("ngSubmit",function(){return e.checkOut()}),r(4,"div")(5,"label",3),a(6,"Details"),l(),v(7,"textarea",4),c(8,j,3,1,"div",5),l(),r(9,"div")(10,"label",6),a(11,"Phone"),l(),v(12,"input",7),c(13,H,3,1,"div",5),l(),r(14,"div")(15,"label",8),a(16,"City"),l(),v(17,"input",9),c(18,L,3,1,"div",5),l(),r(19,"div",10)(20,"button",11),a(21,"Check Out"),l(),r(22,"button",12),E("click",function(){return e.orderCash()}),a(23,"Cash"),l()()()()),s&2){let u,f,d,C,p,F;m(3),g("formGroup",e.paymentForm),m(4),g("ngClass",b(7,O,!((u=e.paymentForm.get("details"))!=null&&u.errors)&&((u=e.paymentForm.get("details"))==null?null:u.touched),((u=e.paymentForm.get("details"))==null?null:u.errors)&&((u=e.paymentForm.get("details"))==null?null:u.touched))),m(),_(8,(f=e.paymentForm.get("details"))!=null&&f.errors&&((f=e.paymentForm.get("details"))!=null&&f.touched)?8:-1),m(4),g("ngClass",b(10,O,!((d=e.paymentForm.get("phone"))!=null&&d.errors)&&((d=e.paymentForm.get("phone"))==null?null:d.touched),((d=e.paymentForm.get("phone"))==null?null:d.errors)&&((d=e.paymentForm.get("phone"))==null?null:d.touched))),m(),_(13,(C=e.paymentForm.get("phone"))!=null&&C.errors&&((C=e.paymentForm.get("phone"))!=null&&C.touched)?13:-1),m(4),g("ngClass",b(13,O,!((p=e.paymentForm.get("city"))!=null&&p.errors)&&((p=e.paymentForm.get("city"))==null?null:p.touched),((p=e.paymentForm.get("city"))==null?null:p.errors)&&((p=e.paymentForm.get("city"))==null?null:p.touched))),m(),_(18,(F=e.paymentForm.get("city"))!=null&&F.errors&&((F=e.paymentForm.get("city"))!=null&&F.touched)?18:-1)}},dependencies:[G,A,q,N,w,M,P,I]});let t=o;return t})();export{oe as OrdersComponent};
