import './polyfills.server.mjs';
import{a as k,b as E}from"./chunk-5OSTAI46.mjs";import{a as I}from"./chunk-SUOOQ76D.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-URVFTESO.mjs";import{m as T}from"./chunk-5K4QWS3Q.mjs";import{$ as v,Gb as o,Hb as _,Ib as g,La as S,Nb as y,Pa as a,Tb as L,Vb as P,X as d,hb as x,ja as h,ka as u,mb as f,nb as w,ob as W,pb as r,qb as s,rb as m,ub as C,yb as p,zb as b}from"./chunk-S4W2THA2.mjs";import"./chunk-VVCT4QZE.mjs";function A(l,n){if(l&1){let c=C();r(0,"div",1)(1,"div",2),m(2,"img",3),s(),r(3,"div",4)(4,"div",5)(5,"div")(6,"h2",6),o(7),s(),r(8,"span",7),o(9),L(10,"currency"),s(),r(11,"span",8),p("click",function(){let t=h(c).$implicit,i=b();return u(i.deletewishlistItem(t.id))}),m(12,"i",9),o(13," Remove"),s()(),r(14,"button",10),p("click",function(){let t=h(c).$implicit,i=b();return u(i.addToCart(t.id))}),o(15,"Add To Cart"),s()()()()}if(l&2){let c=n.$implicit;a(2),x("src",c.imageCover,S)("alt",c.title),a(5),_(c.title),a(2),_(P(10,4,c.price,"GBP"))}}var j=(()=>{let n=class n{constructor(){this._WishlistService=d(E),this._ToastrService=d(I),this._CartService=d(k),this.countWishList=0,this.wishList=[]}ngOnInit(){this.wishSub=this.allProductInWishlist=this._WishlistService.getProductWishlist().subscribe({next:e=>{this.countWishList=e.count,this.wishList=e.data}})}addToCart(e){this.cartSub=this._CartService.addProductCart(e).subscribe({next:t=>{t.status=="success"&&(console.log(t),this.deleteAfterAdd(e),this._ToastrService.success(t.message),this._CartService.cartNumber.next(t.numOfCartItems))}})}deleteAfterAdd(e){this.deleteSub=this._WishlistService.removeProductWishlist(e).subscribe({next:t=>{t.status=="success"&&(this.allProductInWishlist=this._WishlistService.getProductWishlist().subscribe({next:i=>{this.countWishList=i.count,this.wishList=i.data}}))}})}deletewishlistItem(e){this.deleteSub=this._WishlistService.removeProductWishlist(e).subscribe({next:t=>{t.status=="success"&&(this._ToastrService.error("Deleted !"),this.allProductInWishlist=this._WishlistService.getProductWishlist().subscribe({next:i=>{this.countWishList=i.count,this.wishList=i.data}}))}})}ngOnDestroy(){this.wishSub?.unsubscribe(),this.cartSub?.unsubscribe(),this.deleteSub?.unsubscribe()}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v({type:n,selectors:[["app-whishlist"]],standalone:!0,features:[y],decls:7,vars:1,consts:[[1,"bg-light","my-2","w-75","mx-auto","rounded","p-4"],[1,"row","shadow","mt-2","py-2","align-items-center"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10"],[1,"wishListBody","d-flex","justify-content-between","align-items-center","p-1"],[1,"h5"],[1,"d-block"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"btn","btn-success",3,"click"]],template:function(t,i){t&1&&(r(0,"section",0)(1,"h1"),o(2,"wish List"),s(),r(3,"h5"),o(4),s(),w(5,A,16,7,"div",1,f),s()),t&2&&(a(4),g("Total Product In WishList : ",i.countWishList,""),a(),W(i.wishList))},dependencies:[T],styles:["@media (max-width: 576px){.wishListBody[_ngcontent-%COMP%]{display:block!important}button[_ngcontent-%COMP%]{margin-top:5px}}"]});let l=n;return l})();export{j as WhishlistComponent};
